///////////////////////////////////////////////////////////////////////////////
//                                                                            /
// IAR C/C++ Compiler V8.10.3.10338/W32 for 8051        07/Apr/2018  00:13:38 /
// Copyright 2004-2011 IAR Systems AB.                                        /
//                                                                            /
//    Core               =  plain                                             /
//    Code model         =  banked                                            /
//    Data model         =  large                                             /
//    Calling convention =  xdata reentrant                                   /
//    Constant location  =  data                                              /
//    Dptr setup         =  1,16                                              /
//    Source file        =  D:\ProgramData\Hardware\zigbee\Projects\zstack\Sa /
//                          mples\SensorSys\Source\Button_End.c               /
//    Command line       =  -f D:\ProgramData\Hardware\zigbee\Projects\zstack /
//                          \Samples\SensorSys\CC2530DB\..\..\..\Tools\CC2530 /
//                          DB\f8wEndev.cfg (-DCPU32MHZ -DROOT=__near_func    /
//                          -DMAC_CFG_TX_DATA_MAX=3 -DMAC_CFG_TX_MAX=6        /
//                          -DMAC_CFG_RX_MAX=3) -f D:\ProgramData\Hardware\zi /
//                          gbee\Projects\zstack\Samples\SensorSys\CC2530DB\. /
//                          .\..\..\Tools\CC2530DB\f8wConfig.cfg              /
//                          (-DZIGBEEPRO -DSECURE=0 -DZG_SECURE_DYNAMIC=0     /
//                          -DREFLECTOR -DDEFAULT_CHANLIST=0x00000800         /
//                          -DZDAPP_CONFIG_PAN_ID=0xFFF1                      /
//                          -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_M /
//                          ASK=0x007F -DBEACON_REQUEST_DELAY=100             /
//                          -DBEACON_REQ_DELAY_MASK=0x00FF                    /
//                          -DLINK_STATUS_JITTER_MASK=0x007F                  /
//                          -DROUTE_EXPIRY_TIME=30 -DAPSC_ACK_WAIT_DURATION_P /
//                          OLLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=7           /
//                          -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3   /
//                          -DNWK_MAX_DATA_RETRIES=2                          /
//                          -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9        /
//                          -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=40          /
//                          -DNWK_MAX_BINDING_ENTRIES=4                       /
//                          -DMAX_BINDING_CLUSTER_IDS=4                       /
//                          "-DDEFAULT_KEY={0x01, 0x03, 0x05, 0x07, 0x09,     /
//                          0x0B, 0x0D, 0x0F, 0x00, 0x02, 0x04, 0x06, 0x08,   /
//                          0x0A, 0x0C, 0x0D}" -DMAC_MAX_FRAME_SIZE=116       /
//                          -DZDNWKMGR_MIN_TRANSMISSIONS=20 "-DCONST=const    /
//                          __code" -DGENERIC=__generic                       /
//                          -DRFD_RCVC_ALWAYS_ON=TRUE -DPOLL_RATE=1000        /
//                          -DQUEUED_POLL_RATE=100 -DRESPONSE_POLL_RATE=100)  /
//                          -DREJOIN_POLL_RATE=440 D:\ProgramData\Hardware\zi /
//                          gbee\Projects\zstack\Samples\SensorSys\Source\But /
//                          ton_End.c -D NWK_AUTO_POLL -D HOLD_AUTO_START -D  /
//                          REFLECTOR -D POWER_SAVING -D NV_INIT -D           /
//                          xNV_RESTORE -D xZTOOL_P1 -D xMT_TASK -D           /
//                          xMT_SYS_FUNC -D xMT_SAPI_FUNC -D                  /
//                          xMT_SAPI_CB_FUNC -lC D:\ProgramData\Hardware\zigb /
//                          ee\Projects\zstack\Samples\SensorSys\CC2530DB\End /
//                          DeviceEB\List\ -lA D:\ProgramData\Hardware\zigbee /
//                          \Projects\zstack\Samples\SensorSys\CC2530DB\EndDe /
//                          viceEB\List\ --diag_suppress Pe001,Pa010 -o       /
//                          D:\ProgramData\Hardware\zigbee\Projects\zstack\Sa /
//                          mples\SensorSys\CC2530DB\EndDeviceEB\Obj\ -e      /
//                          --no_code_motion --debug --core=plain             /
//                          --dptr=16,1 --data_model=large                    /
//                          --code_model=banked --calling_convention=xdata_re /
//                          entrant --place_constants=data --nr_virtual_regs  /
//                          16 -I D:\ProgramData\Hardware\zigbee\Projects\zst /
//                          ack\Samples\SensorSys\CC2530DB\ -I                /
//                          D:\ProgramData\Hardware\zigbee\Projects\zstack\Sa /
//                          mples\SensorSys\CC2530DB\..\Source\ -I            /
//                          D:\ProgramData\Hardware\zigbee\Projects\zstack\Sa /
//                          mples\SensorSys\CC2530DB\..\..\..\ZMain\TI2530DB\ /
//                           -I D:\ProgramData\Hardware\zigbee\Projects\zstac /
//                          k\Samples\SensorSys\CC2530DB\..\..\..\..\..\Compo /
//                          nents\hal\include\ -I D:\ProgramData\Hardware\zig /
//                          bee\Projects\zstack\Samples\SensorSys\CC2530DB\.. /
//                          \..\..\..\..\Components\hal\target\CC2530EB\ -I   /
//                          D:\ProgramData\Hardware\zigbee\Projects\zstack\Sa /
//                          mples\SensorSys\CC2530DB\..\..\..\..\..\Component /
//                          s\mac\include\ -I D:\ProgramData\Hardware\zigbee\ /
//                          Projects\zstack\Samples\SensorSys\CC2530DB\..\..\ /
//                          ..\..\..\Components\mac\high_level\ -I            /
//                          D:\ProgramData\Hardware\zigbee\Projects\zstack\Sa /
//                          mples\SensorSys\CC2530DB\..\..\..\..\..\Component /
//                          s\mac\low_level\srf04\ -I                         /
//                          D:\ProgramData\Hardware\zigbee\Projects\zstack\Sa /
//                          mples\SensorSys\CC2530DB\..\..\..\..\..\Component /
//                          s\mac\low_level\srf04\single_chip\ -I             /
//                          D:\ProgramData\Hardware\zigbee\Projects\zstack\Sa /
//                          mples\SensorSys\CC2530DB\..\..\..\..\..\Component /
//                          s\mt\ -I D:\ProgramData\Hardware\zigbee\Projects\ /
//                          zstack\Samples\SensorSys\CC2530DB\..\..\..\..\..\ /
//                          Components\osal\include\ -I                       /
//                          D:\ProgramData\Hardware\zigbee\Projects\zstack\Sa /
//                          mples\SensorSys\CC2530DB\..\..\..\..\..\Component /
//                          s\services\saddr\ -I D:\ProgramData\Hardware\zigb /
//                          ee\Projects\zstack\Samples\SensorSys\CC2530DB\..\ /
//                          ..\..\..\..\Components\services\sdata\ -I         /
//                          D:\ProgramData\Hardware\zigbee\Projects\zstack\Sa /
//                          mples\SensorSys\CC2530DB\..\..\..\..\..\Component /
//                          s\stack\af\ -I D:\ProgramData\Hardware\zigbee\Pro /
//                          jects\zstack\Samples\SensorSys\CC2530DB\..\..\..\ /
//                          ..\..\Components\stack\nwk\ -I                    /
//                          D:\ProgramData\Hardware\zigbee\Projects\zstack\Sa /
//                          mples\SensorSys\CC2530DB\..\..\..\..\..\Component /
//                          s\stack\sapi\ -I D:\ProgramData\Hardware\zigbee\P /
//                          rojects\zstack\Samples\SensorSys\CC2530DB\..\..\. /
//                          .\..\..\Components\stack\sec\ -I                  /
//                          D:\ProgramData\Hardware\zigbee\Projects\zstack\Sa /
//                          mples\SensorSys\CC2530DB\..\..\..\..\..\Component /
//                          s\stack\sys\ -I D:\ProgramData\Hardware\zigbee\Pr /
//                          ojects\zstack\Samples\SensorSys\CC2530DB\..\..\.. /
//                          \..\..\Components\stack\zdo\ -I                   /
//                          D:\ProgramData\Hardware\zigbee\Projects\zstack\Sa /
//                          mples\SensorSys\CC2530DB\..\..\..\..\..\Component /
//                          s\zmac\ -I D:\ProgramData\Hardware\zigbee\Project /
//                          s\zstack\Samples\SensorSys\CC2530DB\..\..\..\..\. /
//                          .\Components\zmac\f8w\ -Ohz --require_prototypes  /
//    List file          =  D:\ProgramData\Hardware\zigbee\Projects\zstack\Sa /
//                          mples\SensorSys\CC2530DB\EndDeviceEB\List\Button_ /
//                          End.s51                                           /
//                                                                            /
//                                                                            /
///////////////////////////////////////////////////////////////////////////////

        NAME Button_End

        RTMODEL "__SystemLibrary", "CLib"
        RTMODEL "__calling_convention", "xdata_reentrant"
        RTMODEL "__code_model", "banked"
        RTMODEL "__core", "plain"
        RTMODEL "__data_model", "large"
        RTMODEL "__dptr_size", "16"
        RTMODEL "__extended_stack", "disabled"
        RTMODEL "__location_for_constants", "data"
        RTMODEL "__number_of_dptrs", "1"
        RTMODEL "__rt_version", "1"

        RSEG DOVERLAY:DATA:NOROOT(0)
        RSEG IOVERLAY:IDATA:NOROOT(0)
        RSEG ISTACK:IDATA:NOROOT(0)
        RSEG PSTACK:XDATA:NOROOT(0)
        RSEG XSTACK:XDATA:NOROOT(0)

        EXTERN ?BANKED_ENTER_XDATA
        EXTERN ?BANKED_LEAVE_XDATA
        EXTERN ?BDISPATCH
        EXTERN ?DEALLOC_XSTACK8
        EXTERN ?MOVE_LONG8_XDATA_XDATA
        EXTERN ?PUSH_XSTACK8_X_TWO
        EXTERN ?V0
        EXTERN __INIT_XDATA_I
        EXTERN __INIT_XDATA_Z

        PUBLIC ??Button_HandleKeys?relay
        FUNCTION ??Button_HandleKeys?relay,0203H
        PUBLIC ??Button_Init?relay
        FUNCTION ??Button_Init?relay,0203H
        PUBLIC ??Button_ProcessEvent?relay
        FUNCTION ??Button_ProcessEvent?relay,0203H
        FUNCTION ??Button_ReceiveDataIndication?relay,0203H
        PUBLIC Button_ClusterList
        PUBLIC Button_DstAddr
        PUBLIC Button_HandleKeys
        FUNCTION Button_HandleKeys,021203H
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME XSTACK, 9, STACK
        PUBLIC Button_Init
        FUNCTION Button_Init,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 1, STACK
        LOCFRAME XSTACK, 9, STACK
        PUBLIC Button_ProcessEvent
        FUNCTION Button_ProcessEvent,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME XSTACK, 18, STACK
        FUNCTION Button_ReceiveDataIndication,021203H
        ARGFRAME XSTACK, 18, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME XSTACK, 9, STACK
        PUBLIC Button_SimpleDesc
        PUBLIC Button_TaskID
        PUBLIC Button_epDesc
        PUBLIC buttonCnt
        
        CFI Names cfiNames0
        CFI StackFrame CFA_SP SP IDATA
        CFI StackFrame CFA_PSP16 PSP16 XDATA
        CFI StackFrame CFA_XSP16 XSP16 XDATA
        CFI StaticOverlayFrame CFA_IOVERLAY IOVERLAY
        CFI StaticOverlayFrame CFA_DOVERLAY DOVERLAY
        CFI Resource `PSW.CY`:1, `B.BR0`:1, `B.BR1`:1, `B.BR2`:1, `B.BR3`:1
        CFI Resource `B.BR4`:1, `B.BR5`:1, `B.BR6`:1, `B.BR7`:1, `VB.BR8`:1
        CFI Resource `VB.BR9`:1, `VB.BR10`:1, `VB.BR11`:1, `VB.BR12`:1
        CFI Resource `VB.BR13`:1, `VB.BR14`:1, `VB.BR15`:1, VB:8, B:8, A:8
        CFI Resource PSW:8, DPL0:8, DPH0:8, R0:8, R1:8, R2:8, R3:8, R4:8, R5:8
        CFI Resource R6:8, R7:8, V0:8, V1:8, V2:8, V3:8, V4:8, V5:8, V6:8, V7:8
        CFI Resource V8:8, V9:8, V10:8, V11:8, V12:8, V13:8, V14:8, V15:8, SP:8
        CFI Resource PSPH:8, PSPL:8, PSP16:16, XSPH:8, XSPL:8, XSP16:16
        CFI VirtualResource ?RET:24
        CFI Resource ?BRET_EXT:8
        CFI VirtualResource ?RET_HIGH:8, ?RET_LOW:8
        CFI ResourceParts PSP16 PSPH, PSPL
        CFI ResourceParts XSP16 XSPH, XSPL
        CFI ResourceParts ?RET ?BRET_EXT, ?RET_HIGH, ?RET_LOW
        CFI EndNames cfiNames0
        
        CFI Common cfiCommon0 Using cfiNames0
        CFI CodeAlign 1
        CFI DataAlign -1
        CFI ReturnAddress ?RET CODE
        CFI CFA_DOVERLAY Used
        CFI CFA_IOVERLAY Used
        CFI CFA_SP SP+-3
        CFI CFA_PSP16 PSP16+0
        CFI CFA_XSP16 XSP16+0
        CFI `PSW.CY` SameValue
        CFI `B.BR0` SameValue
        CFI `B.BR1` SameValue
        CFI `B.BR2` SameValue
        CFI `B.BR3` SameValue
        CFI `B.BR4` SameValue
        CFI `B.BR5` SameValue
        CFI `B.BR6` SameValue
        CFI `B.BR7` SameValue
        CFI `VB.BR8` SameValue
        CFI `VB.BR9` SameValue
        CFI `VB.BR10` SameValue
        CFI `VB.BR11` SameValue
        CFI `VB.BR12` SameValue
        CFI `VB.BR13` SameValue
        CFI `VB.BR14` SameValue
        CFI `VB.BR15` SameValue
        CFI VB SameValue
        CFI B Undefined
        CFI A Undefined
        CFI PSW SameValue
        CFI DPL0 SameValue
        CFI DPH0 SameValue
        CFI R0 Undefined
        CFI R1 Undefined
        CFI R2 Undefined
        CFI R3 Undefined
        CFI R4 Undefined
        CFI R5 Undefined
        CFI R6 SameValue
        CFI R7 SameValue
        CFI V0 SameValue
        CFI V1 SameValue
        CFI V2 SameValue
        CFI V3 SameValue
        CFI V4 SameValue
        CFI V5 SameValue
        CFI V6 SameValue
        CFI V7 SameValue
        CFI V8 SameValue
        CFI V9 SameValue
        CFI V10 SameValue
        CFI V11 SameValue
        CFI V12 SameValue
        CFI V13 SameValue
        CFI V14 SameValue
        CFI V15 SameValue
        CFI PSPH Undefined
        CFI PSPL Undefined
        CFI XSPH Undefined
        CFI XSPL Undefined
        CFI ?RET Concat
        CFI ?BRET_EXT Frame(CFA_SP, 3)
        CFI ?RET_HIGH Frame(CFA_SP, 2)
        CFI ?RET_LOW Frame(CFA_SP, 1)
        CFI EndCommon cfiCommon0
        
afRegister          SYMBOL "afRegister"
RegisterForKeys     SYMBOL "RegisterForKeys"
ZDO_RegisterForZDOMsg SYMBOL "ZDO_RegisterForZDOMsg"
HalLedSet           SYMBOL "HalLedSet"
osal_msg_receive    SYMBOL "osal_msg_receive"
Sys_AllowBindConfirm SYMBOL "Sys_AllowBindConfirm"
osal_msg_deallocate SYMBOL "osal_msg_deallocate"
zb_SystemReset      SYMBOL "zb_SystemReset"
Sys_AllowBind       SYMBOL "Sys_AllowBind"
??HalLedSet?relay   SYMBOL "?relay", HalLedSet
??RegisterForKeys?relay SYMBOL "?relay", RegisterForKeys
??Sys_AllowBind?relay SYMBOL "?relay", Sys_AllowBind
??Sys_AllowBindConfirm?relay SYMBOL "?relay", Sys_AllowBindConfirm
??ZDO_RegisterForZDOMsg?relay SYMBOL "?relay", ZDO_RegisterForZDOMsg
??afRegister?relay  SYMBOL "?relay", afRegister
??osal_msg_deallocate?relay SYMBOL "?relay", osal_msg_deallocate
??osal_msg_receive?relay SYMBOL "?relay", osal_msg_receive
??zb_SystemReset?relay SYMBOL "?relay", zb_SystemReset
Button_HandleKeys   SYMBOL "Button_HandleKeys"
??Button_HandleKeys?relay SYMBOL "?relay", Button_HandleKeys
Button_Init         SYMBOL "Button_Init"
??Button_Init?relay SYMBOL "?relay", Button_Init
Button_ProcessEvent SYMBOL "Button_ProcessEvent"
??Button_ProcessEvent?relay SYMBOL "?relay", Button_ProcessEvent

        EXTERN afRegister
        FUNCTION afRegister,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN RegisterForKeys
        FUNCTION RegisterForKeys,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN ZDO_RegisterForZDOMsg
        FUNCTION ZDO_RegisterForZDOMsg,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN HalLedSet
        FUNCTION HalLedSet,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN osal_msg_receive
        FUNCTION osal_msg_receive,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN Sys_AllowBindConfirm
        FUNCTION Sys_AllowBindConfirm,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN osal_msg_deallocate
        FUNCTION osal_msg_deallocate,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN zb_SystemReset
        FUNCTION zb_SystemReset,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN Sys_AllowBind
        FUNCTION Sys_AllowBind,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN ??HalLedSet?relay
        FUNCTION ??HalLedSet?relay,00H
        EXTERN ??RegisterForKeys?relay
        FUNCTION ??RegisterForKeys?relay,00H
        EXTERN ??Sys_AllowBind?relay
        FUNCTION ??Sys_AllowBind?relay,00H
        EXTERN ??Sys_AllowBindConfirm?relay
        FUNCTION ??Sys_AllowBindConfirm?relay,00H
        EXTERN ??ZDO_RegisterForZDOMsg?relay
        FUNCTION ??ZDO_RegisterForZDOMsg?relay,00H
        EXTERN ??afRegister?relay
        FUNCTION ??afRegister?relay,00H
        EXTERN ??osal_msg_deallocate?relay
        FUNCTION ??osal_msg_deallocate?relay,00H
        EXTERN ??osal_msg_receive?relay
        FUNCTION ??osal_msg_receive?relay,00H
        EXTERN ??zb_SystemReset?relay
        FUNCTION ??zb_SystemReset?relay,00H
        EXTERN keys_shift
        EXTERN type_join

// D:\ProgramData\Hardware\zigbee\Projects\zstack\Samples\SensorSys\Source\Button_End.c
//    1 #include "OSAL.h"
//    2 #include "AF.h"
//    3 #include "ZDApp.h"
//    4 #include "ZDObject.h"
//    5 #include "ZDProfile.h"
//    6 #include "sapi.h"
//    7 
//    8 #include "SensorSys_End.h"
//    9 #include "device.h"
//   10 #include "DebugTrace.h"
//   11 
//   12 #if !defined( WIN32 )
//   13 	#include "OnBoard.h"
//   14 #endif
//   15 
//   16 /* HAL */
//   17 #include "hal_led.h"
//   18 #include "hal_key.h"
//   19 #include "hal_uart.h"
//   20 
//   21 /*********************************************************************
//   22  * MACROS
//   23  */
//   24 
//   25 /*********************************************************************
//   26  * CONSTANTS
//   27  */
//   28 
//   29 /*********************************************************************
//   30  * TYPEDEFS
//   31  */
//   32 
//   33 /*********************************************************************
//   34  * GLOBAL VARIABLES
//   35  */
//   36 

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//   37 uint8 buttonCnt = 0;
buttonCnt:
        DS 1
        REQUIRE __INIT_XDATA_Z
//   38 
//   39 
//   40 
//   41 
//   42 // Button Á´ØÁÇπÁöÑÁ∞áID
//   43 // This list should be filled with Application specific Cluster IDs.

        RSEG XDATA_I:XDATA:NOROOT(0)
        DATA8
//   44 const cId_t Button_ClusterList[BUTTON_MAX_CLUSTERS] =
Button_ClusterList:
        DS 8
        REQUIRE `?<Initializer for Button_ClusterList>`
        REQUIRE __INIT_XDATA_I
//   45 {
//   46     PORT_INIT_CLUSTER,
//   47     BUTTON_OPEN,
//   48     BUTTON_CLOSE,
//   49     BUTTON_TRIGGER
//   50 };
//   51 
//   52 // Button Á´ØÁÇπÁÆÄÂçïÊèèËø∞Á¨¶

        RSEG XDATA_I:XDATA:NOROOT(0)
//   53 SimpleDescriptionFormat_t Button_SimpleDesc[BUTTON_NUM_MAX] =
Button_SimpleDesc:
        DATA8
        DS 36
        REQUIRE `?<Initializer for Button_SimpleDesc>`
        REQUIRE __INIT_XDATA_I
//   54 {
//   55 	BUTTON_ENDPOINT,           //  int Endpoint;
//   56 	SYS_PROFID,                //  uint16 AppProfId[2];
//   57 	SYS_DEVICEID,              //  uint16 AppDeviceId[2];
//   58 	SYS_DEVICE_VERSION,        //  int   AppDevVer:4;
//   59 	SYS_FLAGS,                 //  int   AppFlags:4;
//   60 	BUTTON_MAX_CLUSTERS,          //  byte  AppNumInClusters;
//   61 	(cId_t *)Button_ClusterList,  //  byte *pAppInClusterList;
//   62 	BUTTON_MAX_CLUSTERS,          //  byte  AppNumInClusters;
//   63 	(cId_t *)Button_ClusterList   //  byte *pAppInClusterList;
//   64 };
//   65 

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//   66 endPointDesc_t Button_epDesc[BUTTON_NUM_MAX];
Button_epDesc:
        DS 18
        REQUIRE __INIT_XDATA_Z
//   67 
//   68 /*********************************************************************
//   69  * EXTERNAL VARIABLES
//   70  */
//   71 extern uint8 myAppState;
//   72 extern uint8 keys_shift;
//   73 extern uint8 type_join;
//   74 /*********************************************************************
//   75  * EXTERNAL FUNCTIONS
//   76  */
//   77 
//   78 /*********************************************************************
//   79  * LOCAL VARIABLES
//   80  */
//   81 
//   82 

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//   83 byte Button_TaskID;
Button_TaskID:
        DS 1
        REQUIRE __INIT_XDATA_Z
//   84 

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//   85 afAddrType_t Button_DstAddr;
Button_DstAddr:
        DS 12
        REQUIRE __INIT_XDATA_Z
//   86 
//   87 
//   88 /*********************************************************************
//   89  * LOCAL FUNCTIONS
//   90  */
//   91 void Button_Init( byte task_id );
//   92 UINT16 Button_ProcessEvent( byte task_id, UINT16 events );
//   93 void Button_HandleKeys( byte shift, byte keys );
//   94 
//   95 static void Button_ReceiveDataIndication( uint16 source, uint8 endPoint, 
//   96                               uint16 command, uint16 len, uint8 *pData  );
//   97 static void Button_AllowBindConfirm( uint16 source );
//   98 /*********************************************************************
//   99  * @fn      Button_Init
//  100  *
//  101  * @brief   Initialization function for the Generic App Task.
//  102  *          This is called during initialization and should contain
//  103  *          any application specific initialization (ie. hardware
//  104  *          initialization/setup, table initialization, power up
//  105  *          notificaiton ... ).
//  106  *
//  107  * @param   task_id - the ID assigned by OSAL.  This ID should be
//  108  *                    used to send messages and set timers.
//  109  *
//  110  * @return  none
//  111  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  112 void Button_Init( byte task_id )
Button_Init:
        CFI Block cfiBlock0 Using cfiCommon0
        CFI Function Button_Init
        CODE
//  113 {
        FUNCALL Button_Init, afRegister
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL Button_Init, RegisterForKeys
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL Button_Init, ZDO_RegisterForZDOMsg
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL Button_Init, HalLedSet
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL Button_Init, HalLedSet
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL Button_Init, HalLedSet
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x9
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 9)
        ; Saved register size: 9
        ; Auto size: 0
        MOV     A,R1
//  114         char i;
//  115 	Button_TaskID = task_id;
        MOV     DPTR,#Button_TaskID
        MOVX    @DPTR,A
//  116 
//  117 	// Device hardware initialization can be added here or in main() (Zmain.c).
//  118 	// If the hardware is application specific - add it here.
//  119 	// If the hardware is other parts of the device add it in main().
//  120 
//  121 	Button_DstAddr.addrMode = (afAddrMode_t)AddrNotPresent;
        MOV     DPTR,#Button_DstAddr + 8
        CLR     A
        MOVX    @DPTR,A
//  122 	Button_DstAddr.endPoint = 0;
        INC     DPTR
        MOVX    @DPTR,A
//  123 	Button_DstAddr.addr.shortAddr = 0;
        MOV     DPTR,#Button_DstAddr
        MOVX    @DPTR,A
        INC     DPTR
        MOVX    @DPTR,A
//  124         
//  125         for( i=0; i<BUTTON_NUM_MAX; i++)
        MOV     R7,A
//  126         {
//  127             // Fill out the endpoint description.
//  128             Button_epDesc[i].endPoint = BUTTON_ENDPOINT+i;
??Button_Init_0:
        MOV     DPL,R7
        MOV     R0,DPL
        MOV     A,R0
        MOV     B,#0x6
        MUL     AB
        MOV     R2,A
        MOV     R3,B
        MOV     A,#Button_epDesc & 0xff
        ADD     A,R2
        MOV     R2,A
        MOV     A,#(Button_epDesc >> 8) & 0xff
        ADDC    A,R3
        MOV     R3,A
        MOV     A,#0xa
        ADD     A,R7
        MOV     DPL,R2
        MOV     DPH,R3
        MOVX    @DPTR,A
//  129             Button_epDesc[i].task_id = &Button_TaskID;
        INC     DPTR
        MOV     A,#Button_TaskID & 0xff
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,#(Button_TaskID >> 8) & 0xff
        MOVX    @DPTR,A
//  130             Button_SimpleDesc[i] = Button_SimpleDesc[0];
        MOV     A,R0
        MOV     B,#0xc
        MUL     AB
        MOV     R0,A
        MOV     R1,B
        MOV     A,#Button_SimpleDesc & 0xff
        ADD     A,R0
        MOV     R0,A
        MOV     A,#(Button_SimpleDesc >> 8) & 0xff
        ADDC    A,R1
        MOV     R1,A
        MOV     DPTR,#Button_SimpleDesc
        MOV     A,R0
        MOV     R4,A
        MOV     A,R1
        MOV     R5,A
        MOV     A,#0xc
        LCALL   ?MOVE_LONG8_XDATA_XDATA
//  131             Button_epDesc[i].simpleDesc
//  132 						= (SimpleDescriptionFormat_t *)&(Button_SimpleDesc[i]);
        MOV     DPL,R2
        MOV     DPH,R3
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOV     A,R0
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R1
        MOVX    @DPTR,A
//  133             Button_SimpleDesc[i].EndPoint += i;
        MOV     DPL,R0
        MOV     DPH,R1
        MOVX    A,@DPTR
        ADD     A,R7
        MOVX    @DPTR,A
//  134 	    Button_epDesc[i].latencyReq = noLatencyReqs;
        MOV     DPL,R2
        MOV     DPH,R3
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        CLR     A
        MOVX    @DPTR,A
//  135             
//  136             // Register the endpoint description with the AF
//  137 	    afRegister( &(Button_epDesc[i]) );
        ; Setup parameters for call to function afRegister
        LCALL   ??afRegister?relay
//  138         }
        INC     R7
        MOV     A,R7
        CLR     C
        SUBB    A,#0x3
        JC      ??Button_Init_0
//  139 
//  140 	// Register for all key events - This app will handle all key events
//  141 	RegisterForKeys( Button_TaskID );
        ; Setup parameters for call to function RegisterForKeys
        MOV     DPTR,#Button_TaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??RegisterForKeys?relay
//  142  
//  143 	//	ZDO_RegisterForZDOMsg( Button_TaskID, End_Device_Bind_rsp );
//  144 	ZDO_RegisterForZDOMsg( Button_TaskID, Match_Desc_rsp );
        ; Setup parameters for call to function ZDO_RegisterForZDOMsg
        MOV     R2,#0x6
        MOV     R3,#-0x80
        MOV     DPTR,#Button_TaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??ZDO_RegisterForZDOMsg?relay
//  145 
//  146 	HalLedSet ( HAL_LED_1, HAL_LED_MODE_ON );
        ; Setup parameters for call to function HalLedSet
        MOV     R2,#0x1
        MOV     R1,#0x1
        LCALL   ??HalLedSet?relay
//  147         HalLedSet ( HAL_LED_2, HAL_LED_MODE_ON );
        ; Setup parameters for call to function HalLedSet
        MOV     R2,#0x1
        MOV     R1,#0x2
        LCALL   ??HalLedSet?relay
//  148         HalLedSet ( HAL_LED_3, HAL_LED_MODE_ON );
        ; Setup parameters for call to function HalLedSet
        MOV     R2,#0x1
        MOV     R1,#0x4
        LCALL   ??HalLedSet?relay
        CFI EndBlock cfiBlock0
//  149 
//  150 }
        REQUIRE ?Subroutine0
        ; // Fall through to label ?Subroutine0

        RSEG BANKED_CODE:CODE:NOROOT(0)
?Subroutine0:
        CFI Block cfiBlock1 Using cfiCommon0
        CFI NoFunction
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 9)
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        MOV     R7,#0x1
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock1
//  151 
//  152 /*********************************************************************
//  153  * @fn      Button_ProcessEvent
//  154  *
//  155  * @brief   Generic Application Task event processor.  This function
//  156  *          is called to process all events for the task.  Events
//  157  *          include timers, messages and any other user defined events.
//  158  *
//  159  * @param   task_id  - The OSAL assigned task ID.
//  160  * @param   events - events to process.  This is a bit map and can
//  161  *                   contain more than one event.
//  162  *
//  163  * @return  none
//  164  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  165 UINT16 Button_ProcessEvent( byte task_id, UINT16 events )
Button_ProcessEvent:
        CFI Block cfiBlock2 Using cfiCommon0
        CFI Function Button_ProcessEvent
        CODE
//  166 {
        FUNCALL Button_ProcessEvent, osal_msg_receive
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL Button_ProcessEvent, Sys_AllowBindConfirm
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL Button_ProcessEvent, osal_msg_deallocate
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL Button_ProcessEvent, osal_msg_receive
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL Button_ProcessEvent, Button_HandleKeys
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL Button_ProcessEvent, Button_ReceiveDataIndication
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 18, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 18, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0xe
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-12)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-13)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-14)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 14)
        ; Saved register size: 14
        ; Auto size: 0
        MOV     ?V0 + 0,R2
        MOV     ?V0 + 1,R3
//  167     afIncomingMSGPacket_t *MSGpkt = NULL;
//  168     (void)task_id;  // Intentionally unreferenced parameter
//  169 
//  170     if ( events & SYS_EVENT_MSG )
        MOV     A,R3
        ANL     A,#0x80
        JNZ     $+5
        LJMP    ??Button_ProcessEvent_0 & 0xFFFF
//  171     {
//  172         MSGpkt = (afIncomingMSGPacket_t *)osal_msg_receive( task_id );
        ; Setup parameters for call to function osal_msg_receive
        SJMP    ??Button_ProcessEvent_1
//  173         while ( MSGpkt )
//  174         {
//  175           switch ( MSGpkt->hdr.event )
//  176           {
//  177             case KEY_CHANGE:
//  178                 Button_HandleKeys( ((keyChange_t *)MSGpkt)->state, ((keyChange_t *)MSGpkt)->keys );
//  179                 break;
//  180         
//  181             case AF_INCOMING_MSG_CMD:
//  182                 Button_ReceiveDataIndication( MSGpkt->srcAddr.addr.shortAddr, MSGpkt->endPoint, MSGpkt->clusterId,
//  183                                         MSGpkt->cmd.DataLength, MSGpkt->cmd.Data);
//  184                 break;
//  185               
//  186             case ZDO_MATCH_DESC_RSP_SENT:
//  187                 Button_AllowBindConfirm( ((ZDO_MatchDescRspSent_t *)MSGpkt)->nwkAddr );
??Button_ProcessEvent_2:
        ; Setup parameters for call to function Sys_AllowBindConfirm
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R3,A
        LCALL   ??Sys_AllowBindConfirm?relay
//  188                 break;
//  189           }
//  190           // Release the memory
//  191           osal_msg_deallocate( (uint8 *)MSGpkt );
??Button_ProcessEvent_3:
        ; Setup parameters for call to function osal_msg_deallocate
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??osal_msg_deallocate?relay
//  192     
//  193           // Next
//  194           MSGpkt = (afIncomingMSGPacket_t *)osal_msg_receive( Button_TaskID );
        ; Setup parameters for call to function osal_msg_receive
        MOV     DPTR,#Button_TaskID
        MOVX    A,@DPTR
        MOV     R1,A
??Button_ProcessEvent_1:
        LCALL   ??osal_msg_receive?relay
        MOV     ?V0 + 4,R2
        MOV     ?V0 + 5,R3
        MOV     R6,?V0 + 4
        MOV     R7,?V0 + 5
        MOV     A,R6
        ORL     A,R7
        JZ      ??Button_ProcessEvent_4
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,#-0x1a
        JZ      ??Button_ProcessEvent_5
        ADD     A,#0x5a
        JZ      ??Button_ProcessEvent_6
        ADD     A,#-0x12
        JZ      ??Button_ProcessEvent_2
        SJMP    ??Button_ProcessEvent_3
??Button_ProcessEvent_6:
        ; Setup parameters for call to function Button_HandleKeys
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R2,A
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??Button_HandleKeys?relay
        SJMP    ??Button_ProcessEvent_3
??Button_ProcessEvent_5:
        ; Setup parameters for call to function Button_ReceiveDataIndication
        MOV     A,R6
        ADD     A,#0x22
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        LCALL   ?PUSH_XSTACK8_X_TWO
        CFI CFA_XSP16 add(XSP16, 16)
        MOV     A,R6
        ADD     A,#0x20
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        LCALL   ?PUSH_XSTACK8_X_TWO
        CFI CFA_XSP16 add(XSP16, 18)
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R4,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R5,A
        MOV     A,R6
        ADD     A,#0x14
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R3,A
        LCALL   ??Button_ReceiveDataIndication?relay
        MOV     A,#0x4
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 14)
        LJMP    ??Button_ProcessEvent_3 & 0xFFFF
//  195         }
//  196         return (events ^ SYS_EVENT_MSG);
??Button_ProcessEvent_4:
        MOV     R2,?V0 + 0
        MOV     A,?V0 + 1
        XRL     A,#0x80
        MOV     R3,A
        SJMP    ??Button_ProcessEvent_7
//  197     }
//  198     return 0;
??Button_ProcessEvent_0:
        MOV     R2,#0x0
        MOV     R3,#0x0
??Button_ProcessEvent_7:
        MOV     R7,#0x6
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock2
//  199 }
//  200 
//  201 /*********************************************************************
//  202  * @fn      Button_HandleKeys
//  203  *
//  204  * @brief   Handles all key events for this device.
//  205  *
//  206  * @param   shift - true if in shift/alt.
//  207  * @param   keys - bit field for key events. Valid entries:
//  208  *                 HAL_KEY_SW_4
//  209  *                 HAL_KEY_SW_3
//  210  *                 HAL_KEY_SW_2
//  211  *                 HAL_KEY_SW_1
//  212  *
//  213  * @return  none
//  214  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  215 void Button_HandleKeys( byte shift, byte keys )
Button_HandleKeys:
        CFI Block cfiBlock3 Using cfiCommon0
        CFI Function Button_HandleKeys
        CODE
//  216 {
        FUNCALL Button_HandleKeys, zb_SystemReset
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL Button_HandleKeys, zb_SystemReset
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL Button_HandleKeys, zb_SystemReset
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL Button_HandleKeys, Sys_AllowBind
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x9
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 9)
        ; Saved register size: 9
        ; Auto size: 0
        MOV     A,R1
        MOV     R6,A
        MOV     A,R2
        MOV     R7,A
//  217   if(shift)
        MOV     A,R6
        JZ      ??Button_HandleKeys_0
//  218   {
//  219         if ( keys & HAL_KEY_SW_1 )
        MOV     A,R7
        MOV     C,0xE0 /* A   */.0
        JNC     ??Button_HandleKeys_1
//  220         {
//  221           zb_SystemReset();
        ; Setup parameters for call to function zb_SystemReset
        LCALL   ??zb_SystemReset?relay
//  222         }
//  223         if ( keys & HAL_KEY_SW_2 )
??Button_HandleKeys_1:
        MOV     A,R7
        MOV     C,0xE0 /* A   */.1
        JNC     ??Button_HandleKeys_2
//  224         {
//  225           zb_SystemReset();
        ; Setup parameters for call to function zb_SystemReset
        LCALL   ??zb_SystemReset?relay
//  226         }
//  227         if ( keys & HAL_KEY_SW_3 )
??Button_HandleKeys_2:
        MOV     A,R7
        MOV     C,0xE0 /* A   */.4
        JNC     ??Button_HandleKeys_3
//  228         {
//  229           zb_SystemReset();
        ; Setup parameters for call to function zb_SystemReset
        LCALL   ??zb_SystemReset?relay
        SJMP    ??Button_HandleKeys_3
//  230         }
//  231         if ( keys & HAL_KEY_SW_4 )
//  232         {
//  233         }
//  234         if ( keys & HAL_KEY_SW_6 )  // Physical Button S1
//  235         {
//  236             // Send to Watch Endpoint ? Send to Button Endpoint ?
//  237         }
//  238   }
//  239   
//  240   else
//  241   {
//  242 //	uint8 startOptions;
//  243 //	uint8 logicalType;
//  244 	// Shift is used to make each button/switch dual purpose.
//  245 	if ( keys_shift )
??Button_HandleKeys_0:
        MOV     DPTR,#keys_shift
        MOVX    A,@DPTR
        JZ      ??Button_HandleKeys_3
//  246 	{
//  247 		// Allow Binding
//  248 		if ( keys & HAL_KEY_SW_1 )
        MOV     A,R7
        MOV     C,0xE0 /* A   */.0
        JNC     ??Button_HandleKeys_3
//  249 		{
//  250 			if(type_join)
        MOV     DPTR,#type_join
        MOVX    A,@DPTR
        JZ      ??Button_HandleKeys_3
//  251 			{
//  252 				Sys_AllowBind(10);
        ; Setup parameters for call to function Sys_AllowBind
        MOV     R1,#0xa
        LCALL   ??Sys_AllowBind?relay
//  253                                 
//  254 			// osal_start_timerEx(Sys_TaskID, CLOSE_BIND_EVT, 10000);
//  255 			
//  256 				keys_shift = 0;
        MOV     DPTR,#keys_shift
        CLR     A
        MOVX    @DPTR,A
//  257 			}
//  258 			else
//  259 			{
//  260 				// wrong endpoint the presend send to
//  261 			}
//  262 		}
//  263 		if ( keys & HAL_KEY_SW_2 )
//  264 		{
//  265 		}
//  266 		if ( keys & HAL_KEY_SW_3 )
//  267 		{
//  268 		}
//  269 		if ( keys & HAL_KEY_SW_4 )
//  270 		{
//  271 		}
//  272 	}
//  273 	else
//  274 	{
//  275 		if ( keys & HAL_KEY_SW_1 )
//  276 		{
//  277                   
//  278                   /*
//  279 		    if ( myAppState == APP_INIT )
//  280 		    {
//  281 		        // In the init state, keys are used to indicate the logical mode.
//  282 		        // The Switch device is always an end-device
//  283 		        logicalType = ZG_DEVICETYPE_ENDDEVICE;
//  284 		        zb_WriteConfiguration(ZCD_NV_LOGICAL_TYPE, sizeof(uint8), &logicalType);
//  285 
//  286 		        // Do more configuration if necessary and then restart device with auto-start bit set
//  287 
//  288 		        zb_ReadConfiguration( ZCD_NV_STARTUP_OPTION, sizeof(uint8), &startOptions );
//  289 		        startOptions = ZCD_STARTOPT_AUTO_START;
//  290 		        zb_WriteConfiguration( ZCD_NV_STARTUP_OPTION, sizeof(uint8), &startOptions );
//  291 		        zb_SystemReset();
//  292 
//  293     		    }*/
//  294 		  //  else
//  295 		//    {
//  296 
//  297 	//	    }
//  298 		}
//  299 
//  300 		if ( keys & HAL_KEY_SW_2 )
//  301 		{
//  302 		/*
//  303 			HalLedSet ( HAL_LED_4, HAL_LED_MODE_OFF );
//  304 
//  305 			// ÊÉ≥ÁªëÂÆöÂè¶‰∏Ä‰∏™Á´ØÁÇ?			dstAddr.addrMode = Addr16Bit;
//  306 			dstAddr.addr.shortAddr = 0x0000; 
//  307 			ZDP_EndDeviceBindReq( &dstAddr, NLME_GetShortAddr(), 
//  308 														Button_epDesc.endPoint,
//  309 														SENSORSYS_PROFID,
//  310 														SENSORSYS_MAX_CLUSTERS, (cId_t *)Button_ClusterList,
//  311 														SENSORSYS_MAX_CLUSTERS, (cId_t *)Button_ClusterList,
//  312 														FALSE );*/
//  313 		}
//  314 
//  315 		if ( keys & HAL_KEY_SW_3 )
//  316 		{
//  317 		}
//  318 		
//  319 		if ( keys & HAL_KEY_SW_4 )
//  320 		{
//  321 		/*	HalLedSet ( HAL_LED_4, HAL_LED_MODE_OFF );
//  322 			dstAddr.addrMode = AddrBroadcast;
//  323 			dstAddr.addr.shortAddr = NWK_BROADCAST_SHORTADDR;
//  324 			ZDP_MatchDescReq( &dstAddr, NWK_BROADCAST_SHORTADDR,
//  325 												SENSORSYS_PROFID,
//  326 												SENSORSYS_MAX_CLUSTERS, (cId_t *)Button_ClusterList,
//  327 												SENSORSYS_MAX_CLUSTERS, (cId_t *)Button_ClusterList,
//  328 												FALSE );
//  329 		*/
//  330 		}
//  331 	}
//  332   }
//  333 }
??Button_HandleKeys_3:
        LJMP    ?Subroutine0 & 0xFFFF
        CFI EndBlock cfiBlock3
//  334 
//  335 /******************************************************************************
//  336  * @fn          Button_ReceiveDataIndication
//  337  *
//  338  * @brief       The SAPI_ReceiveDataIndication callback function is called
//  339  *              asynchronously by the ZigBee stack to notify the application
//  340  *              when data is received from a peer device.
//  341  *
//  342  * @param       source - The short address of the peer device that sent the data
//  343  *              command - The commandId associated with the data
//  344  *              len - The number of bytes in the pData parameter
//  345  *              pData - The data sent by the peer device
//  346  *
//  347  * @return      none
//  348  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  349 void Button_ReceiveDataIndication( uint16 source, uint8 endPoint, uint16 command, uint16 len, uint8 *pData  )
Button_ReceiveDataIndication:
        CFI Block cfiBlock4 Using cfiCommon0
        CFI Function Button_ReceiveDataIndication
        CODE
//  350 {
        FUNCALL Button_ReceiveDataIndication, Button_HandleKeys
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL Button_ReceiveDataIndication, Button_HandleKeys
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL Button_ReceiveDataIndication, Button_HandleKeys
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL Button_ReceiveDataIndication, Button_HandleKeys
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL Button_ReceiveDataIndication, Button_HandleKeys
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL Button_ReceiveDataIndication, Button_HandleKeys
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL Button_ReceiveDataIndication, Button_HandleKeys
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL Button_ReceiveDataIndication, Button_HandleKeys
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x9
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 9)
        ; Saved register size: 9
        ; Auto size: 0
        MOV     A,R1
//  351   // ButtonAction(endPoint-BUTTON_ENDPOINT, command);
//  352   switch (endPoint)
        ADD     A,#-0xa
        JZ      ??Button_ReceiveDataIndication_0
        DEC     A
        JZ      ??Button_ReceiveDataIndication_1
        DEC     A
        JZ      ??Button_ReceiveDataIndication_2
        LJMP    ??Button_ReceiveDataIndication_3 & 0xFFFF
//  353   {
//  354     case BUTTON_ENDPOINT:
//  355       {
//  356         if (command == BUTTON_OPEN)
??Button_ReceiveDataIndication_0:
        MOV     A,#0x1
        XRL     A,R4
        JNZ     ??Button_ReceiveDataIndication_4
        MOV     A,R5
??Button_ReceiveDataIndication_4:
        JNZ     ??Button_ReceiveDataIndication_5
//  357         {
//  358             Button_HandleKeys( 1, HAL_KEY_SW_1 );
        ; Setup parameters for call to function Button_HandleKeys
        MOV     R2,#0x1
        MOV     R1,#0x1
        LCALL   ??Button_HandleKeys?relay
        SJMP    ??Button_ReceiveDataIndication_6
//  359         }
//  360         if (command == BUTTON_CLOSE)
??Button_ReceiveDataIndication_5:
        MOV     A,#0x2
        XRL     A,R4
        JNZ     ??Button_ReceiveDataIndication_7
        MOV     A,R5
??Button_ReceiveDataIndication_7:
        JNZ     ??Button_ReceiveDataIndication_8
//  361         {
//  362             Button_HandleKeys( 1, HAL_KEY_SW_2 );
        ; Setup parameters for call to function Button_HandleKeys
        MOV     R2,#0x2
        MOV     R1,#0x1
        LCALL   ??Button_HandleKeys?relay
        SJMP    ??Button_ReceiveDataIndication_9
//  363         }
//  364         if (command == BUTTON_TRIGGER)
??Button_ReceiveDataIndication_8:
        MOV     A,#0x3
        XRL     A,R4
        JNZ     ??Button_ReceiveDataIndication_10
        MOV     A,R5
??Button_ReceiveDataIndication_10:
        JNZ     ??Button_ReceiveDataIndication_11
//  365         {
//  366             Button_HandleKeys( 1, HAL_KEY_SW_3 );
        ; Setup parameters for call to function Button_HandleKeys
        MOV     R2,#0x10
        MOV     R1,#0x1
        LCALL   ??Button_HandleKeys?relay
        SJMP    ??Button_ReceiveDataIndication_12
//  367         }
//  368       }
//  369     case (BUTTON_ENDPOINT+1):
//  370       {
//  371         if (command == BUTTON_OPEN)
??Button_ReceiveDataIndication_1:
        MOV     A,#0x1
        XRL     A,R4
        JNZ     ??Button_ReceiveDataIndication_13
        MOV     A,R5
??Button_ReceiveDataIndication_13:
        JNZ     ??Button_ReceiveDataIndication_14
//  372         {
//  373             Button_HandleKeys( 1, HAL_KEY_SW_2 );
??Button_ReceiveDataIndication_6:
        ; Setup parameters for call to function Button_HandleKeys
        MOV     R2,#0x2
??Button_ReceiveDataIndication_15:
        MOV     R1,#0x1
        LCALL   ??Button_HandleKeys?relay
        SJMP    ??Button_ReceiveDataIndication_16
//  374         }
//  375         if (command == BUTTON_CLOSE)
??Button_ReceiveDataIndication_14:
        MOV     A,#0x2
        XRL     A,R4
        JNZ     ??Button_ReceiveDataIndication_17
        MOV     A,R5
??Button_ReceiveDataIndication_17:
        JNZ     ??Button_ReceiveDataIndication_11
//  376         {
//  377             Button_HandleKeys( 1, HAL_KEY_SW_2 );
??Button_ReceiveDataIndication_9:
        ; Setup parameters for call to function Button_HandleKeys
        MOV     R2,#0x2
        MOV     R1,#0x1
        LCALL   ??Button_HandleKeys?relay
        SJMP    ??Button_ReceiveDataIndication_18
//  378         }
//  379         if (command == BUTTON_TRIGGER)
??Button_ReceiveDataIndication_11:
        MOV     A,#0x3
        XRL     A,R4
        JNZ     ??Button_ReceiveDataIndication_19
        MOV     A,R5
??Button_ReceiveDataIndication_19:
        JNZ     ??Button_ReceiveDataIndication_2
//  380         {
//  381             Button_HandleKeys( 1, HAL_KEY_SW_3 );
??Button_ReceiveDataIndication_12:
        ; Setup parameters for call to function Button_HandleKeys
        MOV     R2,#0x10
        SJMP    ??Button_ReceiveDataIndication_15
//  382         }
//  383       }
//  384     case (BUTTON_ENDPOINT+2):
//  385       {
//  386         if (command == BUTTON_OPEN)
??Button_ReceiveDataIndication_2:
        MOV     A,#0x1
        XRL     A,R4
        JNZ     ??Button_ReceiveDataIndication_20
        MOV     A,R5
??Button_ReceiveDataIndication_20:
        JNZ     ??Button_ReceiveDataIndication_21
//  387         {
//  388             Button_HandleKeys( 1, HAL_KEY_SW_3 );
??Button_ReceiveDataIndication_16:
        ; Setup parameters for call to function Button_HandleKeys
        MOV     R2,#0x10
??Button_ReceiveDataIndication_22:
        MOV     R1,#0x1
        LCALL   ??Button_HandleKeys?relay
        SJMP    ??Button_ReceiveDataIndication_3
//  389         } 
//  390         if (command == BUTTON_CLOSE)
??Button_ReceiveDataIndication_21:
        MOV     A,#0x2
        XRL     A,R4
        JNZ     ??Button_ReceiveDataIndication_23
        MOV     A,R5
??Button_ReceiveDataIndication_23:
        JNZ     ??Button_ReceiveDataIndication_24
//  391         {
//  392             Button_HandleKeys( 1, HAL_KEY_SW_2 );
??Button_ReceiveDataIndication_18:
        ; Setup parameters for call to function Button_HandleKeys
        MOV     R2,#0x2
        SJMP    ??Button_ReceiveDataIndication_22
//  393         }
//  394         if (command == BUTTON_TRIGGER)
??Button_ReceiveDataIndication_24:
        MOV     A,#0x3
        XRL     A,R4
        JNZ     ??Button_ReceiveDataIndication_25
        MOV     A,R5
??Button_ReceiveDataIndication_25:
        JZ      ??Button_ReceiveDataIndication_16
//  395         {
//  396             Button_HandleKeys( 1, HAL_KEY_SW_3 );
//  397         }
//  398       }
//  399   }
//  400 }
??Button_ReceiveDataIndication_3:
        LJMP    ?Subroutine0 & 0xFFFF
        CFI EndBlock cfiBlock4

        RSEG XDATA_ID:CODE:NOROOT(0)
`?<Initializer for Button_ClusterList>`:
        DATA16
        DW 4096
        DW 1
        DW 2
        DW 3

        RSEG XDATA_ID:CODE:NOROOT(0)
`?<Initializer for Button_SimpleDesc>`:
        DATA8
        DB 10
        DATA16
        DW 3844
        DW 1
        DATA8
        DB 0
        DB 4
        DATA16
        DW Button_ClusterList
        DATA8
        DB 4
        DATA16
        DW Button_ClusterList
        DB 0, 0, 0, 0, 0, 0, 0, 0
        DB 0, 0, 0, 0, 0, 0, 0, 0
        DB 0, 0, 0, 0, 0, 0, 0, 0

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??Button_Init?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    Button_Init

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??Button_ProcessEvent?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    Button_ProcessEvent

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??Button_HandleKeys?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    Button_HandleKeys

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??Button_ReceiveDataIndication?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    Button_ReceiveDataIndication

        END
//  401 
//  402 /******************************************************************************
//  403  * @fn          Button_AllowBindConfirm
//  404  *
//  405  * @brief       Indicates when another device attempted to bind to this device
//  406  *
//  407  * @param
//  408  *
//  409  * @return      none
//  410  */
//  411 void Button_AllowBindConfirm( uint16 source )
//  412 {
//  413     Sys_AllowBindConfirm(source);
//  414 }
// 
// 586 bytes in segment BANKED_CODE
//  24 bytes in segment BANK_RELAYS
//  44 bytes in segment XDATA_I
//  44 bytes in segment XDATA_ID
//  32 bytes in segment XDATA_Z
// 
// 654 bytes of CODE  memory
//  76 bytes of XDATA memory
//
//Errors: none
//Warnings: none
